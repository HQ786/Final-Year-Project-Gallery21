"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/user/[id]/route";
exports.ids = ["app/api/user/[id]/route"];
exports.modules = {

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fuser%2F%5Bid%5D%2Froute&page=%2Fapi%2Fuser%2F%5Bid%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fuser%2F%5Bid%5D%2Froute.js&appDir=%2FVolumes%2FMySecureSphere%2FFYP%20Code%2Fgallery21-main%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FVolumes%2FMySecureSphere%2FFYP%20Code%2Fgallery21-main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fuser%2F%5Bid%5D%2Froute&page=%2Fapi%2Fuser%2F%5Bid%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fuser%2F%5Bid%5D%2Froute.js&appDir=%2FVolumes%2FMySecureSphere%2FFYP%20Code%2Fgallery21-main%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FVolumes%2FMySecureSphere%2FFYP%20Code%2Fgallery21-main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Volumes_MySecureSphere_FYP_Code_gallery21_main_app_api_user_id_route_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/user/[id]/route.js */ \"(rsc)/./app/api/user/[id]/route.js\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/user/[id]/route\",\n        pathname: \"/api/user/[id]\",\n        filename: \"route\",\n        bundlePath: \"app/api/user/[id]/route\"\n    },\n    resolvedPagePath: \"/Volumes/MySecureSphere/FYP Code/gallery21-main/app/api/user/[id]/route.js\",\n    nextConfigOutput,\n    userland: _Volumes_MySecureSphere_FYP_Code_gallery21_main_app_api_user_id_route_js__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/user/[id]/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ1c2VyJTJGJTVCaWQlNUQlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnVzZXIlMkYlNUJpZCU1RCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnVzZXIlMkYlNUJpZCU1RCUyRnJvdXRlLmpzJmFwcERpcj0lMkZWb2x1bWVzJTJGTXlTZWN1cmVTcGhlcmUlMkZGWVAlMjBDb2RlJTJGZ2FsbGVyeTIxLW1haW4lMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlZvbHVtZXMlMkZNeVNlY3VyZVNwaGVyZSUyRkZZUCUyMENvZGUlMkZnYWxsZXJ5MjEtbWFpbiZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDMEI7QUFDdkc7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9nYWxsZXJ5MjEtd2ViLWFwcC0yLjAvPzBhMWYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1ZvbHVtZXMvTXlTZWN1cmVTcGhlcmUvRllQIENvZGUvZ2FsbGVyeTIxLW1haW4vYXBwL2FwaS91c2VyL1tpZF0vcm91dGUuanNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3VzZXIvW2lkXS9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3VzZXIvW2lkXVwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvdXNlci9baWRdL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1ZvbHVtZXMvTXlTZWN1cmVTcGhlcmUvRllQIENvZGUvZ2FsbGVyeTIxLW1haW4vYXBwL2FwaS91c2VyL1tpZF0vcm91dGUuanNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL3VzZXIvW2lkXS9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fuser%2F%5Bid%5D%2Froute&page=%2Fapi%2Fuser%2F%5Bid%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fuser%2F%5Bid%5D%2Froute.js&appDir=%2FVolumes%2FMySecureSphere%2FFYP%20Code%2Fgallery21-main%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FVolumes%2FMySecureSphere%2FFYP%20Code%2Fgallery21-main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/user/[id]/route.js":
/*!************************************!*\
  !*** ./app/api/user/[id]/route.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DELETE: () => (/* binding */ DELETE),\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   PATCH: () => (/* binding */ PATCH)\n/* harmony export */ });\n/* harmony import */ var _models_User__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @models/User */ \"(rsc)/./models/User.js\");\n/* harmony import */ var _utils_database__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @utils/database */ \"(rsc)/./utils/database.js\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\nconst GET = async (request, { params })=>{\n    const { id: identifier } = params; // Get user ID from route parameters\n    try {\n        console.log(\"identifier\", identifier);\n        await (0,_utils_database__WEBPACK_IMPORTED_MODULE_1__.connectToDB)();\n        let user;\n        if (mongoose__WEBPACK_IMPORTED_MODULE_3___default().Types.ObjectId.isValid(identifier)) {\n            user = await _models_User__WEBPACK_IMPORTED_MODULE_0__[\"default\"].findById(identifier);\n        } else {\n            // If not a valid ObjectId, search by username\n            user = await _models_User__WEBPACK_IMPORTED_MODULE_0__[\"default\"].findOne({\n                username: identifier\n            });\n        }\n        if (!user) {\n            return new Response(JSON.stringify({\n                error: \"User not found\"\n            }), {\n                status: 404\n            });\n        }\n        // Exclude sensitive information before sending the response\n        const { password: userPassword, ...userData } = user.toObject();\n        return new Response(JSON.stringify(userData), {\n            status: 200\n        });\n    } catch (error) {\n        console.error(\"Error handling user profile:\", error);\n        return new Response(JSON.stringify({\n            message: \"Failed to process request\"\n        }), {\n            status: 500\n        });\n    }\n};\nconst PATCH = async (request, { params })=>{\n    const { id } = params; // Get user ID from route parameters\n    try {\n        await (0,_utils_database__WEBPACK_IMPORTED_MODULE_1__.connectToDB)(); // Ensure you have the database connection established\n        const body = await request.json(); // Access the JSON body\n        const { username, email, password } = body; // Destructure username, email, and password from the body\n        // Fetching the user to update\n        const userToUpdate = await _models_User__WEBPACK_IMPORTED_MODULE_0__[\"default\"].findById(id);\n        if (!userToUpdate) {\n            return new Response(JSON.stringify({\n                message: \"User not found\"\n            }), {\n                status: 404\n            });\n        }\n        // Update username if provided and allowed\n        if (username) {\n            const currentTime = new Date();\n            const lastUsernameChange = userToUpdate.lastUsernameChange; // Assume you have this field in your User model\n            // Check if the username change is allowed (once per week)\n            const timeSinceLastChange = (currentTime - lastUsernameChange) / (1000 * 60 * 60 * 24); // in days\n            if (timeSinceLastChange < 7) {\n                return new Response(JSON.stringify({\n                    message: \"You can only change your username once per week.\"\n                }), {\n                    status: 400\n                });\n            }\n            userToUpdate.username = username; // Update username\n            userToUpdate.lastUsernameChange = currentTime; // Update last username change timestamp\n        }\n        // Update email if provided\n        if (email) {\n            userToUpdate.email = email; // Update email\n        }\n        // Update password if provided\n        if (password) {\n            userToUpdate.password = password;\n        }\n        // Save the updated user\n        await userToUpdate.save();\n        return new Response(JSON.stringify({\n            message: \"User profile updated successfully\",\n            user: userToUpdate\n        }), {\n            status: 200\n        });\n    } catch (error) {\n        console.error(\"Error updating user profile:\", error);\n        return new Response(JSON.stringify({\n            message: \"Failed to process request\"\n        }), {\n            status: 500\n        });\n    }\n};\nconst DELETE = async (request, { params })=>{\n    const { id } = params; // Get user ID from route parameters\n    try {\n        await (0,_utils_database__WEBPACK_IMPORTED_MODULE_1__.connectToDB)();\n        // First, find and delete all artworks created by the user\n        await Artwork.deleteMany({\n            creator: id\n        });\n        // Next, find and delete all posts created by the user\n        await Post.deleteMany({\n            userId: id\n        });\n        // Finally, find and delete all ongoing or scheduled auctions for the user's artworks\n        const auctionsToDelete = await Auction.find({\n            artist: id\n        });\n        if (auctionsToDelete) await Auction.deleteMany({\n            artist: id\n        });\n        // After deleting related data, delete the user profile\n        const deletedUser = await _models_User__WEBPACK_IMPORTED_MODULE_0__[\"default\"].findByIdAndDelete(id);\n        if (!deletedUser) {\n            return new Response(JSON.stringify({\n                message: \"User not found\"\n            }), {\n                status: 404\n            });\n        }\n        return new Response(JSON.stringify({\n            message: \"User profile and related data deleted successfully\"\n        }), {\n            status: 200\n        });\n    } catch (error) {\n        console.error(\"Error deleting user profile and related data:\", error);\n        return new Response(JSON.stringify({\n            message: \"Failed to process request\"\n        }), {\n            status: 500\n        });\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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REE7UUFDL0QsT0FBTyxJQUFJSCxTQUNUQyxLQUFLQyxTQUFTLENBQUM7WUFBRU8sU0FBUztRQUE0QixJQUN0RDtZQUFFTCxRQUFRO1FBQUk7SUFFbEI7QUFDRixFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ2FsbGVyeTIxLXdlYi1hcHAtMi4wLy4vYXBwL2FwaS91c2VyL1tpZF0vcm91dGUuanM/ZWJmZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgVXNlciBmcm9tIFwiQG1vZGVscy9Vc2VyXCI7XHJcbmltcG9ydCB7IGNvbm5lY3RUb0RCIH0gZnJvbSBcIkB1dGlscy9kYXRhYmFzZVwiO1xyXG5pbXBvcnQgYmNyeXB0IGZyb20gJ2JjcnlwdGpzJzsgXHJcbmltcG9ydCBtb25nb29zZSBmcm9tIFwibW9uZ29vc2VcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBHRVQgPSBhc3luYyAocmVxdWVzdCwgeyBwYXJhbXMgfSkgPT4ge1xyXG5cclxuICBjb25zdCB7IGlkOiBpZGVudGlmaWVyIH0gPSBwYXJhbXM7IC8vIEdldCB1c2VyIElEIGZyb20gcm91dGUgcGFyYW1ldGVyc1xyXG5cclxuICB0cnkge1xyXG4gICAgY29uc29sZS5sb2coJ2lkZW50aWZpZXInLGlkZW50aWZpZXIpXHJcbiAgICBhd2FpdCBjb25uZWN0VG9EQigpO1xyXG4gICAgbGV0IHVzZXI7XHJcbiAgICBpZiAobW9uZ29vc2UuVHlwZXMuT2JqZWN0SWQuaXNWYWxpZChpZGVudGlmaWVyKSkge1xyXG4gICAgICB1c2VyID0gYXdhaXQgVXNlci5maW5kQnlJZChpZGVudGlmaWVyKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIElmIG5vdCBhIHZhbGlkIE9iamVjdElkLCBzZWFyY2ggYnkgdXNlcm5hbWVcclxuICAgICAgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IHVzZXJuYW1lOiBpZGVudGlmaWVyIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghdXNlcikge1xyXG4gICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKEpTT04uc3RyaW5naWZ5KHsgZXJyb3I6ICdVc2VyIG5vdCBmb3VuZCcgfSksIHtcclxuICAgICAgICBzdGF0dXM6IDQwNCB9KTtcclxuICAgIH1cclxuICAgIC8vIEV4Y2x1ZGUgc2Vuc2l0aXZlIGluZm9ybWF0aW9uIGJlZm9yZSBzZW5kaW5nIHRoZSByZXNwb25zZVxyXG4gICAgY29uc3QgeyBwYXNzd29yZDogdXNlclBhc3N3b3JkLCAuLi51c2VyRGF0YSB9ID0gdXNlci50b09iamVjdCgpO1xyXG4gICAgcmV0dXJuIG5ldyBSZXNwb25zZShcclxuICAgICAgSlNPTi5zdHJpbmdpZnkodXNlckRhdGEpLFxyXG4gICAgICB7IHN0YXR1czogMjAwIH1cclxuICAgICk7XHJcbiAgICBcclxuXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGhhbmRsaW5nIHVzZXIgcHJvZmlsZTonLCBlcnJvcik7XHJcbiAgICByZXR1cm4gbmV3IFJlc3BvbnNlKFxyXG4gICAgICBKU09OLnN0cmluZ2lmeSh7IG1lc3NhZ2U6ICdGYWlsZWQgdG8gcHJvY2VzcyByZXF1ZXN0JyB9KSxcclxuICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICApO1xyXG4gIH1cclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBQQVRDSCA9IGFzeW5jIChyZXF1ZXN0LCB7IHBhcmFtcyB9KSA9PiB7XHJcbiAgY29uc3QgeyBpZCB9ID0gcGFyYW1zOyAvLyBHZXQgdXNlciBJRCBmcm9tIHJvdXRlIHBhcmFtZXRlcnNcclxuXHJcbiAgdHJ5IHtcclxuICAgIGF3YWl0IGNvbm5lY3RUb0RCKCk7IC8vIEVuc3VyZSB5b3UgaGF2ZSB0aGUgZGF0YWJhc2UgY29ubmVjdGlvbiBlc3RhYmxpc2hlZFxyXG5cclxuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTsgLy8gQWNjZXNzIHRoZSBKU09OIGJvZHlcclxuICAgIGNvbnN0IHsgdXNlcm5hbWUsIGVtYWlsLCBwYXNzd29yZCB9ID0gYm9keTsgLy8gRGVzdHJ1Y3R1cmUgdXNlcm5hbWUsIGVtYWlsLCBhbmQgcGFzc3dvcmQgZnJvbSB0aGUgYm9keVxyXG5cclxuICAgIC8vIEZldGNoaW5nIHRoZSB1c2VyIHRvIHVwZGF0ZVxyXG4gICAgY29uc3QgdXNlclRvVXBkYXRlID0gYXdhaXQgVXNlci5maW5kQnlJZChpZCk7XHJcbiAgICBpZiAoIXVzZXJUb1VwZGF0ZSkge1xyXG4gICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKFxyXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KHsgbWVzc2FnZTogJ1VzZXIgbm90IGZvdW5kJyB9KSxcclxuICAgICAgICB7IHN0YXR1czogNDA0IH1cclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBVcGRhdGUgdXNlcm5hbWUgaWYgcHJvdmlkZWQgYW5kIGFsbG93ZWRcclxuICAgIGlmICh1c2VybmFtZSkge1xyXG4gICAgICBjb25zdCBjdXJyZW50VGltZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgIGNvbnN0IGxhc3RVc2VybmFtZUNoYW5nZSA9IHVzZXJUb1VwZGF0ZS5sYXN0VXNlcm5hbWVDaGFuZ2U7IC8vIEFzc3VtZSB5b3UgaGF2ZSB0aGlzIGZpZWxkIGluIHlvdXIgVXNlciBtb2RlbFxyXG5cclxuICAgICAgLy8gQ2hlY2sgaWYgdGhlIHVzZXJuYW1lIGNoYW5nZSBpcyBhbGxvd2VkIChvbmNlIHBlciB3ZWVrKVxyXG4gICAgICBjb25zdCB0aW1lU2luY2VMYXN0Q2hhbmdlID0gKGN1cnJlbnRUaW1lIC0gbGFzdFVzZXJuYW1lQ2hhbmdlKSAvICgxMDAwICogNjAgKiA2MCAqIDI0KTsgLy8gaW4gZGF5c1xyXG4gICAgICBpZiAodGltZVNpbmNlTGFzdENoYW5nZSA8IDcpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKFxyXG4gICAgICAgICAgSlNPTi5zdHJpbmdpZnkoeyBtZXNzYWdlOiAnWW91IGNhbiBvbmx5IGNoYW5nZSB5b3VyIHVzZXJuYW1lIG9uY2UgcGVyIHdlZWsuJyB9KSxcclxuICAgICAgICAgIHsgc3RhdHVzOiA0MDAgfVxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgICAgdXNlclRvVXBkYXRlLnVzZXJuYW1lID0gdXNlcm5hbWU7IC8vIFVwZGF0ZSB1c2VybmFtZVxyXG4gICAgICB1c2VyVG9VcGRhdGUubGFzdFVzZXJuYW1lQ2hhbmdlID0gY3VycmVudFRpbWU7IC8vIFVwZGF0ZSBsYXN0IHVzZXJuYW1lIGNoYW5nZSB0aW1lc3RhbXBcclxuICAgIH1cclxuXHJcbiAgICAvLyBVcGRhdGUgZW1haWwgaWYgcHJvdmlkZWRcclxuICAgIGlmIChlbWFpbCkge1xyXG4gICAgICB1c2VyVG9VcGRhdGUuZW1haWwgPSBlbWFpbDsgLy8gVXBkYXRlIGVtYWlsXHJcbiAgICB9XHJcblxyXG4gICAgLy8gVXBkYXRlIHBhc3N3b3JkIGlmIHByb3ZpZGVkXHJcbiAgICBpZiAocGFzc3dvcmQpIHtcclxuICAgICAgdXNlclRvVXBkYXRlLnBhc3N3b3JkID0gcGFzc3dvcmQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU2F2ZSB0aGUgdXBkYXRlZCB1c2VyXHJcbiAgICBhd2FpdCB1c2VyVG9VcGRhdGUuc2F2ZSgpO1xyXG5cclxuICAgIHJldHVybiBuZXcgUmVzcG9uc2UoXHJcbiAgICAgIEpTT04uc3RyaW5naWZ5KHsgbWVzc2FnZTogJ1VzZXIgcHJvZmlsZSB1cGRhdGVkIHN1Y2Nlc3NmdWxseScsIHVzZXI6IHVzZXJUb1VwZGF0ZSB9KSxcclxuICAgICAgeyBzdGF0dXM6IDIwMCB9XHJcbiAgICApO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyB1c2VyIHByb2ZpbGU6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIG5ldyBSZXNwb25zZShcclxuICAgICAgSlNPTi5zdHJpbmdpZnkoeyBtZXNzYWdlOiAnRmFpbGVkIHRvIHByb2Nlc3MgcmVxdWVzdCcgfSksXHJcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgKTtcclxuICB9XHJcbn07XHJcblxyXG5cclxuZXhwb3J0IGNvbnN0IERFTEVURSA9IGFzeW5jIChyZXF1ZXN0LCB7IHBhcmFtcyB9KSA9PiB7XHJcbiAgY29uc3QgeyBpZCB9ID0gcGFyYW1zOyAvLyBHZXQgdXNlciBJRCBmcm9tIHJvdXRlIHBhcmFtZXRlcnNcclxuXHJcbiAgdHJ5IHtcclxuICAgIGF3YWl0IGNvbm5lY3RUb0RCKCk7XHJcblxyXG4gICAgLy8gRmlyc3QsIGZpbmQgYW5kIGRlbGV0ZSBhbGwgYXJ0d29ya3MgY3JlYXRlZCBieSB0aGUgdXNlclxyXG4gICAgYXdhaXQgQXJ0d29yay5kZWxldGVNYW55KHsgY3JlYXRvcjogaWQgfSk7XHJcblxyXG4gICAgLy8gTmV4dCwgZmluZCBhbmQgZGVsZXRlIGFsbCBwb3N0cyBjcmVhdGVkIGJ5IHRoZSB1c2VyXHJcbiAgICBhd2FpdCBQb3N0LmRlbGV0ZU1hbnkoeyB1c2VySWQ6IGlkIH0pO1xyXG5cclxuICAgIC8vIEZpbmFsbHksIGZpbmQgYW5kIGRlbGV0ZSBhbGwgb25nb2luZyBvciBzY2hlZHVsZWQgYXVjdGlvbnMgZm9yIHRoZSB1c2VyJ3MgYXJ0d29ya3NcclxuICAgIGNvbnN0IGF1Y3Rpb25zVG9EZWxldGUgPSBhd2FpdCBBdWN0aW9uLmZpbmQoeyBhcnRpc3Q6IGlkIH0pO1xyXG4gICAgaWYgKGF1Y3Rpb25zVG9EZWxldGUpXHJcbiAgICAgIGF3YWl0IEF1Y3Rpb24uZGVsZXRlTWFueSh7IGFydGlzdDogaWQgfSk7XHJcblxyXG4gICAgLy8gQWZ0ZXIgZGVsZXRpbmcgcmVsYXRlZCBkYXRhLCBkZWxldGUgdGhlIHVzZXIgcHJvZmlsZVxyXG4gICAgY29uc3QgZGVsZXRlZFVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkQW5kRGVsZXRlKGlkKTtcclxuXHJcbiAgICBpZiAoIWRlbGV0ZWRVc2VyKSB7XHJcbiAgICAgIHJldHVybiBuZXcgUmVzcG9uc2UoXHJcbiAgICAgICAgSlNPTi5zdHJpbmdpZnkoeyBtZXNzYWdlOiAnVXNlciBub3QgZm91bmQnIH0pLFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDQgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBuZXcgUmVzcG9uc2UoXHJcbiAgICAgIEpTT04uc3RyaW5naWZ5KHsgbWVzc2FnZTogJ1VzZXIgcHJvZmlsZSBhbmQgcmVsYXRlZCBkYXRhIGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5JyB9KSxcclxuICAgICAgeyBzdGF0dXM6IDIwMCB9XHJcbiAgICApO1xyXG5cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZGVsZXRpbmcgdXNlciBwcm9maWxlIGFuZCByZWxhdGVkIGRhdGE6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIG5ldyBSZXNwb25zZShcclxuICAgICAgSlNPTi5zdHJpbmdpZnkoeyBtZXNzYWdlOiAnRmFpbGVkIHRvIHByb2Nlc3MgcmVxdWVzdCcgfSksXHJcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgKTtcclxuICB9XHJcbn07Il0sIm5hbWVzIjpbIlVzZXIiLCJjb25uZWN0VG9EQiIsImJjcnlwdCIsIm1vbmdvb3NlIiwiR0VUIiwicmVxdWVzdCIsInBhcmFtcyIsImlkIiwiaWRlbnRpZmllciIsImNvbnNvbGUiLCJsb2ciLCJ1c2VyIiwiVHlwZXMiLCJPYmplY3RJZCIsImlzVmFsaWQiLCJmaW5kQnlJZCIsImZpbmRPbmUiLCJ1c2VybmFtZSIsIlJlc3BvbnNlIiwiSlNPTiIsInN0cmluZ2lmeSIsImVycm9yIiwic3RhdHVzIiwicGFzc3dvcmQiLCJ1c2VyUGFzc3dvcmQiLCJ1c2VyRGF0YSIsInRvT2JqZWN0IiwibWVzc2FnZSIsIlBBVENIIiwiYm9keSIsImpzb24iLCJlbWFpbCIsInVzZXJUb1VwZGF0ZSIsImN1cnJlbnRUaW1lIiwiRGF0ZSIsImxhc3RVc2VybmFtZUNoYW5nZSIsInRpbWVTaW5jZUxhc3RDaGFuZ2UiLCJzYXZlIiwiREVMRVRFIiwiQXJ0d29yayIsImRlbGV0ZU1hbnkiLCJjcmVhdG9yIiwiUG9zdCIsInVzZXJJZCIsImF1Y3Rpb25zVG9EZWxldGUiLCJBdWN0aW9uIiwiZmluZCIsImFydGlzdCIsImRlbGV0ZWRVc2VyIiwiZmluZEJ5SWRBbmREZWxldGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/user/[id]/route.js\n");

/***/ }),

/***/ "(rsc)/./models/User.js":
/*!************************!*\
  !*** ./models/User.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jsonwebtoken */ \"(rsc)/./node_modules/jsonwebtoken/index.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nconst UserSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    firstName: {\n        type: String\n    },\n    lastName: {\n        type: String\n    },\n    username: {\n        type: String,\n        unique: [\n            true,\n            \"Username already exists\"\n        ],\n        required: [\n            true,\n            \"Username is required\"\n        ],\n        maxlength: 20\n    },\n    email: {\n        type: String,\n        unique: [\n            true,\n            \"Email already exists\"\n        ],\n        required: [\n            true,\n            \"Email is required\"\n        ],\n        maxlength: 50\n    },\n    roles: {\n        type: [\n            String\n        ],\n        enum: [\n            \"Novice User\",\n            \"Art Enthusiast\",\n            \"Artist\"\n        ],\n        default: [\n            \"Novice User\"\n        ]\n    },\n    isAdmin: {\n        type: Boolean,\n        default: false\n    },\n    gender: {\n        type: String,\n        enum: [\n            \"male\",\n            \"female\",\n            \"other\"\n        ]\n    },\n    password: {\n        type: String,\n        required: [\n            true,\n            \"Password is required\"\n        ]\n    },\n    profileImagePath: {\n        type: String\n    },\n    isVerified: {\n        type: Boolean,\n        default: false\n    },\n    wishList: {\n        type: Array,\n        default: []\n    },\n    cart: {\n        type: Array,\n        default: []\n    },\n    orders: {\n        type: Array,\n        default: []\n    },\n    artwork: {\n        type: [\n            mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.ObjectId\n        ],\n        ref: \"Artwork\",\n        default: []\n    },\n    followers: [\n        {\n            type: mongoose__WEBPACK_IMPORTED_MODULE_0__.mongoose.Schema.Types.ObjectId,\n            ref: \"User\",\n            default: []\n        }\n    ],\n    following: [\n        {\n            type: mongoose__WEBPACK_IMPORTED_MODULE_0__.mongoose.Schema.Types.ObjectId,\n            ref: \"User\",\n            default: []\n        }\n    ],\n    joinedForums: [\n        {\n            type: mongoose__WEBPACK_IMPORTED_MODULE_0__.mongoose.Schema.Types.ObjectId,\n            ref: \"Forum\"\n        }\n    ],\n    createdThreads: [\n        {\n            type: mongoose__WEBPACK_IMPORTED_MODULE_0__.mongoose.Schema.Types.ObjectId,\n            ref: \"Thread\"\n        }\n    ],\n    createdComments: [\n        {\n            type: mongoose__WEBPACK_IMPORTED_MODULE_0__.mongoose.Schema.Types.ObjectId,\n            ref: \"Comment\"\n        }\n    ],\n    connectedAccountId: {\n        type: String,\n        default: null\n    },\n    lastUsernameChanged: {\n        type: Date,\n        default: Date.now\n    }\n}, {\n    timestamps: true\n});\n// Add an index for the followers field\nUserSchema.index({\n    followers: 1\n});\n// Add an index for the following field\nUserSchema.index({\n    following: 1\n});\nUserSchema.methods.generatePasswordResetToken = function() {\n    const token = jsonwebtoken__WEBPACK_IMPORTED_MODULE_2___default().sign({\n        id: this._id\n    }, process.env.JWT_SECRET, {\n        expiresIn: \"1h\"\n    });\n    this.passwordResetToken = token; // Add this field to your user model\n    this.passwordResetExpires = Date.now() + 3600000; // 1 hour\n    return token;\n};\n// Middleware to hash password before saving the user\nUserSchema.pre(\"save\", async function(next) {\n    if (this.isModified(\"password\")) {\n        const salt = await bcryptjs__WEBPACK_IMPORTED_MODULE_1___default().genSalt(10);\n        this.password = await bcryptjs__WEBPACK_IMPORTED_MODULE_1___default().hash(this.password, salt);\n    }\n    next();\n});\n// Method to find a user by email and password\nUserSchema.statics.findByCredentials = async function(email, password) {\n    const user = await this.findOne({\n        email\n    });\n    if (!user) {\n        throw new Error(\"User not found\");\n    }\n    if (!await bcryptjs__WEBPACK_IMPORTED_MODULE_1___default().compare(password, user.password)) {\n        throw new Error(\"Incorrect password\");\n    }\n    return user;\n};\nconst User = mongoose__WEBPACK_IMPORTED_MODULE_0__.models.User || (0,mongoose__WEBPACK_IMPORTED_MODULE_0__.model)(\"User\", UserSchema);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (User);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVc7SUFBSztJQUNuRixJQUFJLENBQUNDLGtCQUFrQixHQUFHUixPQUFPLG9DQUFvQztJQUNyRSxJQUFJLENBQUNTLG9CQUFvQixHQUFHZixLQUFLQyxHQUFHLEtBQUssU0FBUyxTQUFTO0lBQzNELE9BQU9LO0FBQ1Q7QUFFQSxxREFBcUQ7QUFDckR4QyxXQUFXa0QsR0FBRyxDQUFDLFFBQVEsZUFBZ0JDLElBQUk7SUFDekMsSUFBSSxJQUFJLENBQUNDLFVBQVUsQ0FBQyxhQUFhO1FBQy9CLE1BQU1DLE9BQU8sTUFBTXZELHVEQUFjLENBQUM7UUFDbEMsSUFBSSxDQUFDa0IsUUFBUSxHQUFHLE1BQU1sQixvREFBVyxDQUFDLElBQUksQ0FBQ2tCLFFBQVEsRUFBRXFDO0lBQ25EO0lBQ0FGO0FBQ0Y7QUFFQSw4Q0FBOEM7QUFDOUNuRCxXQUFXd0QsT0FBTyxDQUFDQyxpQkFBaUIsR0FBRyxlQUFnQmhELEtBQUssRUFBRU8sUUFBUTtJQUNwRSxNQUFNMEMsT0FBTyxNQUFNLElBQUksQ0FBQ0MsT0FBTyxDQUFDO1FBQUVsRDtJQUFNO0lBRXhDLElBQUksQ0FBQ2lELE1BQU07UUFDVCxNQUFNLElBQUlFLE1BQU07SUFDbEI7SUFDQSxJQUFJLENBQUMsTUFBTTlELHVEQUFjLENBQUNrQixVQUFVMEMsS0FBSzFDLFFBQVEsR0FBRztRQUNsRCxNQUFNLElBQUk0QyxNQUFNO0lBQ2xCO0lBRUEsT0FBT0Y7QUFDVDtBQUVBLE1BQU1JLE9BQU9sRSw0Q0FBTUEsQ0FBQ2tFLElBQUksSUFBSW5FLCtDQUFLQSxDQUFDLFFBQVFLO0FBRTFDLGlFQUFlOEQsSUFBSUEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2dhbGxlcnkyMS13ZWItYXBwLTIuMC8uL21vZGVscy9Vc2VyLmpzPzczNjciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU2NoZW1hLCBtb2RlbCwgbW9kZWxzLCBtb25nb29zZSB9IGZyb20gXCJtb25nb29zZVwiO1xuaW1wb3J0IGJjcnlwdCBmcm9tIFwiYmNyeXB0anNcIjtcbmltcG9ydCBqd3QgZnJvbSAnanNvbndlYnRva2VuJztcblxuY29uc3QgVXNlclNjaGVtYSA9IG5ldyBTY2hlbWEoe1xuICBmaXJzdE5hbWU6IHsgdHlwZTogU3RyaW5nfSxcbiAgbGFzdE5hbWU6IHsgdHlwZTogU3RyaW5nIH0sXG4gIHVzZXJuYW1lOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIHVuaXF1ZTogW3RydWUsIFwiVXNlcm5hbWUgYWxyZWFkeSBleGlzdHNcIl0sXG4gICAgcmVxdWlyZWQ6IFt0cnVlLCBcIlVzZXJuYW1lIGlzIHJlcXVpcmVkXCJdLFxuICAgIG1heGxlbmd0aDogMjAsXG4gIH0sXG4gIGVtYWlsOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIHVuaXF1ZTogW3RydWUsIFwiRW1haWwgYWxyZWFkeSBleGlzdHNcIl0sXG4gICAgcmVxdWlyZWQ6IFt0cnVlLCBcIkVtYWlsIGlzIHJlcXVpcmVkXCJdLFxuICAgIG1heGxlbmd0aDogNTAsXG4gIH0sXG4gIHJvbGVzOiB7XG4gICAgdHlwZTogW1N0cmluZ10sXG4gICAgZW51bTogWydOb3ZpY2UgVXNlcicsICdBcnQgRW50aHVzaWFzdCcsICdBcnRpc3QnXSxcbiAgICBkZWZhdWx0OiBbJ05vdmljZSBVc2VyJ10sXG4gIH0sXG4gIGlzQWRtaW46IHtcbiAgICB0eXBlOiBCb29sZWFuLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICB9LFxuICBnZW5kZXI6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgZW51bTogW1wibWFsZVwiLCBcImZlbWFsZVwiLCBcIm90aGVyXCJdLFxuICB9LFxuICBwYXNzd29yZDoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICByZXF1aXJlZDogW3RydWUsIFwiUGFzc3dvcmQgaXMgcmVxdWlyZWRcIl0sXG4gIH0sXG4gIHByb2ZpbGVJbWFnZVBhdGg6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gIH0sXG4gIGlzVmVyaWZpZWQ6IHtcbiAgICB0eXBlOiBCb29sZWFuLFxuICAgIGRlZmF1bHQ6IGZhbHNlLCAvLyBEZWZhdWx0IHRvIGZhbHNlIHVudGlsIHRoZSB1c2VyIHZlcmlmaWVzIHZpYSBPVFBcbiAgfSxcbiAgd2lzaExpc3Q6IHtcbiAgICB0eXBlOiBBcnJheSxcbiAgICBkZWZhdWx0OiBbXSxcbiAgfSxcbiAgY2FydDoge1xuICAgIHR5cGU6IEFycmF5LFxuICAgIGRlZmF1bHQ6IFtdLFxuICB9LFxuICBvcmRlcnM6IHtcbiAgICB0eXBlOiBBcnJheSxcbiAgICBkZWZhdWx0OiBbXSxcbiAgfSxcbiAgYXJ0d29yazoge1xuICAgIHR5cGU6IFtTY2hlbWEuVHlwZXMuT2JqZWN0SWRdLFxuICAgIHJlZjogXCJBcnR3b3JrXCIsXG4gICAgZGVmYXVsdDogW10sXG4gIH0sXG4gIGZvbGxvd2VyczogW3sgXG4gICAgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLCBcbiAgICByZWY6IFwiVXNlclwiLFxuICAgIGRlZmF1bHQ6IFtdLFxuICB9XSxcbiAgZm9sbG93aW5nOiBbeyBcbiAgICB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsIFxuICAgIHJlZjogXCJVc2VyXCIsXG4gICAgZGVmYXVsdDogW10sIFxuICB9XSxcbiAgam9pbmVkRm9ydW1zOiBbeyBcbiAgICB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsIFxuICAgIHJlZjogJ0ZvcnVtJyBcbiAgfV0sXG4gIGNyZWF0ZWRUaHJlYWRzOiBbeyBcbiAgICB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsIFxuICAgIHJlZjogJ1RocmVhZCcgXG4gIH1dLFxuICBjcmVhdGVkQ29tbWVudHM6IFt7IFxuICAgIHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCwgcmVmOiAnQ29tbWVudCcgXG4gIH1dLFxuICBjb25uZWN0ZWRBY2NvdW50SWQ6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgZGVmYXVsdDogbnVsbCxcbiAgfSxcbiAgbGFzdFVzZXJuYW1lQ2hhbmdlZDoge1xuICAgIHR5cGU6IERhdGUsXG4gICAgZGVmYXVsdDogRGF0ZS5ub3csXG4gIH0sXG59LCB7IHRpbWVzdGFtcHM6IHRydWUgfSk7XG5cbi8vIEFkZCBhbiBpbmRleCBmb3IgdGhlIGZvbGxvd2VycyBmaWVsZFxuVXNlclNjaGVtYS5pbmRleCh7IGZvbGxvd2VyczogMSB9KTtcblxuLy8gQWRkIGFuIGluZGV4IGZvciB0aGUgZm9sbG93aW5nIGZpZWxkXG5Vc2VyU2NoZW1hLmluZGV4KHsgZm9sbG93aW5nOiAxIH0pO1xuXG5Vc2VyU2NoZW1hLm1ldGhvZHMuZ2VuZXJhdGVQYXNzd29yZFJlc2V0VG9rZW4gPSBmdW5jdGlvbiAoKSB7XG4gIGNvbnN0IHRva2VuID0gand0LnNpZ24oeyBpZDogdGhpcy5faWQgfSwgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCwgeyBleHBpcmVzSW46ICcxaCcgfSk7XG4gIHRoaXMucGFzc3dvcmRSZXNldFRva2VuID0gdG9rZW47IC8vIEFkZCB0aGlzIGZpZWxkIHRvIHlvdXIgdXNlciBtb2RlbFxuICB0aGlzLnBhc3N3b3JkUmVzZXRFeHBpcmVzID0gRGF0ZS5ub3coKSArIDM2MDAwMDA7IC8vIDEgaG91clxuICByZXR1cm4gdG9rZW47XG59O1xuXG4vLyBNaWRkbGV3YXJlIHRvIGhhc2ggcGFzc3dvcmQgYmVmb3JlIHNhdmluZyB0aGUgdXNlclxuVXNlclNjaGVtYS5wcmUoJ3NhdmUnLCBhc3luYyBmdW5jdGlvbiAobmV4dCkge1xuICBpZiAodGhpcy5pc01vZGlmaWVkKCdwYXNzd29yZCcpKSB7XG4gICAgY29uc3Qgc2FsdCA9IGF3YWl0IGJjcnlwdC5nZW5TYWx0KDEwKTtcbiAgICB0aGlzLnBhc3N3b3JkID0gYXdhaXQgYmNyeXB0Lmhhc2godGhpcy5wYXNzd29yZCwgc2FsdCk7XG4gIH1cbiAgbmV4dCgpO1xufSk7XG5cbi8vIE1ldGhvZCB0byBmaW5kIGEgdXNlciBieSBlbWFpbCBhbmQgcGFzc3dvcmRcblVzZXJTY2hlbWEuc3RhdGljcy5maW5kQnlDcmVkZW50aWFscyA9IGFzeW5jIGZ1bmN0aW9uIChlbWFpbCwgcGFzc3dvcmQpIHtcbiAgY29uc3QgdXNlciA9IGF3YWl0IHRoaXMuZmluZE9uZSh7IGVtYWlsIH0pO1xuICBcbiAgaWYgKCF1c2VyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdVc2VyIG5vdCBmb3VuZCcpO1xuICB9XG4gIGlmICghYXdhaXQgYmNyeXB0LmNvbXBhcmUocGFzc3dvcmQsIHVzZXIucGFzc3dvcmQpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdJbmNvcnJlY3QgcGFzc3dvcmQnKTtcbiAgfVxuICBcbiAgcmV0dXJuIHVzZXI7XG59O1xuXG5jb25zdCBVc2VyID0gbW9kZWxzLlVzZXIgfHwgbW9kZWwoXCJVc2VyXCIsIFVzZXJTY2hlbWEpO1xuXG5leHBvcnQgZGVmYXVsdCBVc2VyO1xuIl0sIm5hbWVzIjpbIlNjaGVtYSIsIm1vZGVsIiwibW9kZWxzIiwibW9uZ29vc2UiLCJiY3J5cHQiLCJqd3QiLCJVc2VyU2NoZW1hIiwiZmlyc3ROYW1lIiwidHlwZSIsIlN0cmluZyIsImxhc3ROYW1lIiwidXNlcm5hbWUiLCJ1bmlxdWUiLCJyZXF1aXJlZCIsIm1heGxlbmd0aCIsImVtYWlsIiwicm9sZXMiLCJlbnVtIiwiZGVmYXVsdCIsImlzQWRtaW4iLCJCb29sZWFuIiwiZ2VuZGVyIiwicGFzc3dvcmQiLCJwcm9maWxlSW1hZ2VQYXRoIiwiaXNWZXJpZmllZCIsIndpc2hMaXN0IiwiQXJyYXkiLCJjYXJ0Iiwib3JkZXJzIiwiYXJ0d29yayIsIlR5cGVzIiwiT2JqZWN0SWQiLCJyZWYiLCJmb2xsb3dlcnMiLCJmb2xsb3dpbmciLCJqb2luZWRGb3J1bXMiLCJjcmVhdGVkVGhyZWFkcyIsImNyZWF0ZWRDb21tZW50cyIsImNvbm5lY3RlZEFjY291bnRJZCIsImxhc3RVc2VybmFtZUNoYW5nZWQiLCJEYXRlIiwibm93IiwidGltZXN0YW1wcyIsImluZGV4IiwibWV0aG9kcyIsImdlbmVyYXRlUGFzc3dvcmRSZXNldFRva2VuIiwidG9rZW4iLCJzaWduIiwiaWQiLCJfaWQiLCJwcm9jZXNzIiwiZW52IiwiSldUX1NFQ1JFVCIsImV4cGlyZXNJbiIsInBhc3N3b3JkUmVzZXRUb2tlbiIsInBhc3N3b3JkUmVzZXRFeHBpcmVzIiwicHJlIiwibmV4dCIsImlzTW9kaWZpZWQiLCJzYWx0IiwiZ2VuU2FsdCIsImhhc2giLCJzdGF0aWNzIiwiZmluZEJ5Q3JlZGVudGlhbHMiLCJ1c2VyIiwiZmluZE9uZSIsIkVycm9yIiwiY29tcGFyZSIsIlVzZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./models/User.js\n");

/***/ }),

/***/ "(rsc)/./utils/database.js":
/*!***************************!*\
  !*** ./utils/database.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   connectToDB: () => (/* binding */ connectToDB)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n// @utils/database.js\n\nlet isConnected = false;\nconst connectToDB = async ()=>{\n    mongoose__WEBPACK_IMPORTED_MODULE_0___default().set(\"strictQuery\", true);\n    if (isConnected) {\n        console.log(\"MongoDB is already connected\");\n        return (mongoose__WEBPACK_IMPORTED_MODULE_0___default().connection);\n    }\n    try {\n        const connection = await mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(process.env.MONGODB_URL);\n        isConnected = true;\n        console.log(\"MongoDB connected\");\n        return connection.connection;\n    } catch (error) {\n        console.error(\"Error connecting to MongoDB:\", error);\n        throw new Error(\"Failed to connect to MongoDB\");\n    }\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi91dGlscy9kYXRhYmFzZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxxQkFBcUI7QUFFVztBQUVoQyxJQUFJQyxjQUFjO0FBRWxCLE1BQU1DLGNBQWM7SUFDbEJGLG1EQUFZLENBQUMsZUFBZTtJQUU1QixJQUFJQyxhQUFhO1FBQ2ZHLFFBQVFDLEdBQUcsQ0FBQztRQUNaLE9BQU9MLDREQUFtQjtJQUM1QjtJQUVBLElBQUk7UUFDRixNQUFNTSxhQUFhLE1BQU1OLHVEQUFnQixDQUFDUSxRQUFRQyxHQUFHLENBQUNDLFdBQVc7UUFFakVULGNBQWM7UUFDZEcsUUFBUUMsR0FBRyxDQUFDO1FBRVosT0FBT0MsV0FBV0EsVUFBVTtJQUM5QixFQUFFLE9BQU9LLE9BQU87UUFDZFAsUUFBUU8sS0FBSyxDQUFDLGdDQUFnQ0E7UUFDOUMsTUFBTSxJQUFJQyxNQUFNO0lBQ2xCO0FBQ0Y7QUFFdUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9nYWxsZXJ5MjEtd2ViLWFwcC0yLjAvLi91dGlscy9kYXRhYmFzZS5qcz8yYjllIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEB1dGlscy9kYXRhYmFzZS5qc1xyXG5cclxuaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcclxuXHJcbmxldCBpc0Nvbm5lY3RlZCA9IGZhbHNlOyBcclxuXHJcbmNvbnN0IGNvbm5lY3RUb0RCID0gYXN5bmMgKCkgPT4ge1xyXG4gIG1vbmdvb3NlLnNldCgnc3RyaWN0UXVlcnknLCB0cnVlKTtcclxuXHJcbiAgaWYgKGlzQ29ubmVjdGVkKSB7XHJcbiAgICBjb25zb2xlLmxvZygnTW9uZ29EQiBpcyBhbHJlYWR5IGNvbm5lY3RlZCcpO1xyXG4gICAgcmV0dXJuIG1vbmdvb3NlLmNvbm5lY3Rpb247XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgY29ubmVjdGlvbiA9IGF3YWl0IG1vbmdvb3NlLmNvbm5lY3QocHJvY2Vzcy5lbnYuTU9OR09EQl9VUkwpO1xyXG5cclxuICAgIGlzQ29ubmVjdGVkID0gdHJ1ZTtcclxuICAgIGNvbnNvbGUubG9nKCdNb25nb0RCIGNvbm5lY3RlZCcpO1xyXG5cclxuICAgIHJldHVybiBjb25uZWN0aW9uLmNvbm5lY3Rpb247XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNvbm5lY3RpbmcgdG8gTW9uZ29EQjonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBjb25uZWN0IHRvIE1vbmdvREInKTtcclxuICB9XHJcbn07XHJcblxyXG5leHBvcnQgeyBjb25uZWN0VG9EQiB9O1xyXG4iXSwibmFtZXMiOlsibW9uZ29vc2UiLCJpc0Nvbm5lY3RlZCIsImNvbm5lY3RUb0RCIiwic2V0IiwiY29uc29sZSIsImxvZyIsImNvbm5lY3Rpb24iLCJjb25uZWN0IiwicHJvY2VzcyIsImVudiIsIk1PTkdPREJfVVJMIiwiZXJyb3IiLCJFcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./utils/database.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@opentelemetry","vendor-chunks/semver","vendor-chunks/bcryptjs","vendor-chunks/jsonwebtoken","vendor-chunks/lodash.includes","vendor-chunks/jws","vendor-chunks/lodash.once","vendor-chunks/jwa","vendor-chunks/lodash.isinteger","vendor-chunks/ecdsa-sig-formatter","vendor-chunks/lodash.isplainobject","vendor-chunks/ms","vendor-chunks/lodash.isstring","vendor-chunks/lodash.isnumber","vendor-chunks/lodash.isboolean","vendor-chunks/safe-buffer","vendor-chunks/buffer-equal-constant-time"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fuser%2F%5Bid%5D%2Froute&page=%2Fapi%2Fuser%2F%5Bid%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fuser%2F%5Bid%5D%2Froute.js&appDir=%2FVolumes%2FMySecureSphere%2FFYP%20Code%2Fgallery21-main%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FVolumes%2FMySecureSphere%2FFYP%20Code%2Fgallery21-main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();